# üì¶ PACKAGE COMPLET POUR LE BACKEND

## üéØ Credentials Hackathon

```
Matrix ID: @better42team:poc.luxchat4pro.lu
JWT Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJiZXR0ZXI0MlRlYW0ifQ.gAtwJQr_JUO4JjqMXtfZz7kPKuTjbrkXZzDaVUd-3WY
Server: https://poc.luxchat4pro.lu
```

## üìÅ Fichiers √† Utiliser

### Workflows JSON (Ordonn√©s par Priorit√©)

1. **demo_hackathon.json** ‚≠ê PRIORIT√â 1
   - Workflow complet pour la d√©mo officielle
   - 6 actions : Create Room ‚Üí Send Message ‚Üí Invite ‚Üí Wait ‚Üí Send ‚Üí Stats
   - √Ä ex√©cuter pendant le pitch

2. **exemple_onboarding.json** 
   - Exemple d'onboarding automatique
   - 4 actions simples
   - Pour tester le backend

3. **exemple_room_temporaire.json**
   - Salon qui s'auto-d√©truit
   - D√©mo du Wait + Destroy

### Documentation

1. **BACKEND_IMPLEMENTATION.md**
   - Code Python COMPLET pour les 7 actions
   - Copy-paste ready
   - Avec exemples

2. **BACKEND_CHECKLIST.md**
   - Points critiques
   - Timeline recommand√©e
   - Troubleshooting

3. **EXPLICATION_TECHNIQUE.md**
   - Comment tout fonctionne
   - Flow de donn√©es
   - Analogies simples

## üöÄ Quick Start

### Installation
```bash
pip install matrix-nio aiohttp
```

### Test Rapide
```python
import json

# Lire le workflow
with open('workflows/demo_hackathon.json') as f:
    workflow = json.load(f)

print(f"Nom: {workflow['name']}")
print(f"Actions: {len(workflow['nodes'])}")

# Voir les actions
for node in workflow['nodes']:
    print(f"- {node['data']['label']} ({node['type']})")
```

### Ex√©cution Compl√®te

## üìä Structure du JSON

```json
{
  "name": "Nom du workflow",
  "nodes": [
    {
      "id": "unique-id",
      "type": "createRoom | sendMessage | inviteUser | waitTime | analyseStats | destroyRoom | webhookTrigger",
      "data": {
        "label": "Nom affich√©",
        "type": "m√™me que ci-dessus",
        "config": {
          // Configuration sp√©cifique √† chaque type
        }
      }
    }
  ],
  "edges": [
    {
      "source": "node-id-1",
      "target": "node-id-2"
    }
  ]
}
```

## üéØ Les 7 Types d'Actions

### 1. createRoom
```python
config = {
    "roomName": "Nom du salon",
    "visibility": "public" | "private",
    "members": ["@user1:server", "@user2:server"]
}
```

### 2. sendMessage
```python
config = {
    "message": "Texte du message",
    "format": "plain" | "markdown" | "html",
    "targetRoom": "!roomId:server" ou ""  # vide = dernier salon cr√©√©
}
```

### 3. inviteUser
```python
config = {
    "userId": "@username:server",
    "roomId": "!roomId:server" ou ""  # vide = dernier salon cr√©√©
}
```

### 4. waitTime
```python
config = {
    "duration": 5,
    "unit": "seconds" | "minutes" | "hours" | "days"
}
```

### 5. analyseStats
```python
config = {
    "statsType": "room" | "user" | "server",
    "timeRange": "1h" | "24h" | "7d" | "30d"
}
```

### 6. destroyRoom
```python
config = {
    "roomId": "!roomId:server" ou ""  # vide = dernier salon cr√©√©
}
```

### 7. webhookTrigger
```python
config = {
    "webhookUrl": "https://example.com/webhook",
    "method": "GET" | "POST"
}
```

## üí° Contexte Partag√©

**Important :** Les actions partagent un contexte commun !

```python
context = {}

# Dans createRoom
room_id = response.room_id
context['last_room_id'] = room_id  # Sauvegarde

# Dans sendMessage (si targetRoom est vide)
room_id = config.get('targetRoom') or context.get('last_room_id')  # R√©cup√®re
```

## ‚ö†Ô∏è Points Critiques

1. **Ordre d'Ex√©cution**
   - Utiliser les `edges` pour d√©terminer l'ordre
   - Tri topologique recommand√©
   - Voir BACKEND_IMPLEMENTATION.md

2. **Gestion des Erreurs**
   - Toujours wrapper dans try/except
   - Logger les erreurs
   - Continuer ou arr√™ter selon le cas

3. **Permissions**
   - V√©rifier les power_levels avant destroyRoom
   - V√©rifier que le bot peut inviter avant inviteUser

## üé¨ Pour la D√©mo du Hackathon

### Avant le Pitch
1. Tester avec `exemple_onboarding.json`
2. V√©rifier que tout fonctionne
3. Pr√©parer `demo_hackathon.json`

### Pendant le Pitch
```bash
# Bryan montre le frontend
# "Voici notre workflow builder..."

#x√©cute le backend
python execute_workflow.py

# Le salon appara√Æt dans Luxchat en temps r√©el !
# üéâ WOW Effect garanti !
```

## üìû Contact

Si probl√®me :
- Ping sur Luxchat
- Check la doc compl√®te
- Debug avec des prints

Bon courage ! üöÄ
Team Better 42
